{{ define "main" }}
<div class="posts h-feed">
  <div class="post_list" role="main">
    {{ if in (slice "home" "section" "taxonomy" "term") .Kind }}
      {{ $posts := where .Site.RegularPages "Type" "eq" "post" | sort "Date" "desc" }}
      {{ $paginator := .Paginate $posts }}
      {{ range $paginator.Pages }}
        <article class="post-preview h-entry {{ range .Params.categories }} {{ . | urlize | lower }}{{ end }}">
          <a href="{{ .Permalink }}" class="post-date u-url">
            <time class="dt-published" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date | time.Format ":date_long" }}</time> ∞
          </a>
          {{ if .Title }}
            <h2 class="post-title p-name"><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
          {{ end }}
          <div class="p-summary">
            {{ .Summary | safeHTML }}
          </div>
        </article>
      {{ end }}

      <div class="post-nav">
        {{ if $paginator.HasPrev }}
          <span class="prev">
            <a href="{{ $paginator.Prev.URL }}" title="Previous Page"><span class="arrow">← Newer Posts</span></a>
          </span>
        {{ end }}
        {{ if $paginator.HasNext }}
          <span class="next">
            <a href="{{ $paginator.Next.URL }}"><span class="arrow">Older Posts →</span></a>
          </span>
        {{ end }}
      </div>
    {{ end }}
  </div>
</div>
{{ end }}
